---
export async function getStaticPaths() {
  const pages = Astro.fetchContent("../**/*.md");
  pages.sort((a, b) => new Date(b.published) - new Date(a.published));

  const tags = [...new Set(pages.flatMap(({ tags }) => tags))];
  
  return tags.map((tag) => {
    return {
      params: { tag },
      props: {
        pages: pages.filter(({ tags }) => tags.includes(tag)),
      },
    }
  });
}

import { Tag } from "@niederman/website-theme/pages/tags";
---

<Tag {...Astro.props} />